"use strict";var DialogRemember={AUTO_SESSION_USED:{when:"auto",howlong:"session",which:"used"},AUTO_SESSION_YES:{when:"auto",howlong:"session",which:"yes"},AUTO_SESSION_NO:{when:"auto",howlong:"session",which:"no"},AUTO_STORE_USED:{when:"auto",howlong:"store",which:"used"},AUTO_STORE_YES:{when:"auto",howlong:"store",which:"yes"},AUTO_STORE_NO:{when:"auto",howlong:"store",which:"no"},CHOOSE_SESSION_USED:{when:"choose",howlong:"session",which:"used"},CHOOSE_SESSION_YES:{when:"choose",howlong:"session",which:"yes"},CHOOSE_SESSION_NO:{when:"choose",howlong:"session",which:"no"},CHOOSE_STORE_USED:{when:"choose",howlong:"store",which:"used"},CHOOSE_STORE_YES:{when:"choose",howlong:"store",which:"yes"},CHOOSE_STORE_NO:{when:"choose",howlong:"store",which:"no"},NEVER:{when:"never"}};function Dialog(e){var o=this;e=e||{};this.onYes=e.onYes||function(){};this.onNo=e.onNo||function(){};this.autoid=!e.id;this.id=e.id||"dialog"+Math.floor(Math.random()*999999999);this.remember=e.remember||DialogRemember.NEVER;this.remembered=false;if(this.remember.howlong=="store"){if(this.autoid){throw new Error("A dialogs choise can only remember in local storage when the dialog has en explizit id, because the aumaticly generated id will change on reload.")}this.remembered=localStorage.getItem(this.id)}this.background=document.createElement("div");this.background.addClass("dialog");this.background.addClass("background");this.background.setAttribute("id","background_"+this.id);this.background.onclick=function(){o.clickNo()};this.popup=document.createElement("div");this.popup.addClass("dialog");this.popup.addClass("popup");this.popup.setAttribute("id","popup_"+this.id);var i=document.createElement("div");i.addClass("dialog");i.addClass("content");i.innerHTML=e.content||tr(["dialog",this.id,"content"]);this.popup.appendChild(i);var s=document.createElement("span");s.addClass("ok");s.addClass("yes");s.innerText=e.yes||tr(["dialog",this.id,"ok","yes"]);s.onclick=function(){o.clickYes()};this.popup.appendChild(s);if(e.no!==false){var t=document.createElement("span");t.addClass("cancel");t.addClass("no");t.innerText=e.no||tr(["dialog",this.id,"cancel","no"]);t.onclick=function(){o.clickNo()};this.popup.appendChild(t)}}Dialog.prototype={action:function(e,o){if(this.remember.when!="never"){if(this.remember.when=="auto"||this.remember.when=="choose"&&o){if(this.remember.which=="used"){this.remembered=e?"yes":"no"}else{this.remembered=this.remember.which}}if(this.remember.howlong=="store"&&!this.autoid){localStorage.setItem(this.id,this.remembered)}}if(e){this.onYes()}else{this.onNo()}this.close()},clickYes:function(){this.action(true)},clickNo:function(){this.action(false)},close:function(){this.popup.remove();this.background.remove()},open:function(){if(this.remembered){if(this.remembered=="yes"){this.onYes()}else{this.onNo()}}else{document.body.appendChild(this.background);document.body.appendChild(this.popup)}}};