"use strict";function wrapWithDebug(r,c){if(!window.DEBUG){return r}c=c||r.name||r.toString().match(/^\s*function\s+([^\s(]+)\s*\(/)[1]||"anonymous";if(window.DEBUG!==true&&!window.DEBUG[c]){return r}var o=function(){var o=Array.prototype.slice.call(arguments,0);var n=[];for(var e in o){n[e]=JSON.stringify(o[e])}consoleDebug("new "+c+"( "+n.join(", ")+" )");r.apply(this,o);for(var s in this){if(this[s]instanceof Function){if(!window.DEBUG[c]||window.DEBUG[c]["function"]!==false){(function(t){var i=s;var u=t[i];t[s]=function(){var o=Array.prototype.slice.call(arguments,0);var n=[];for(var e in o){n[e]=JSON.stringify(o[e])}consoleDebug(c+"."+i+"( "+n.join(", ")+" )",1);var r=u.apply(t,o);consoleDebug(c+"."+i+"( "+n.join(", ")+" ) : "+JSON.stringify(r),-1);return r}})(this)}}else{(function(o){var n=s;var e=o[n];var r={get:function(){return e},set:function(o){consoleDebug(c+"."+n+" = "+JSON.stringify(o));e=o}};if(window.DEBUG[c]&&window.DEBUG[c]["getter"]===true){r.get=function(){consoleDebug(c+"."+n+" : "+JSON.stringify(e));return e}}if(window.DEBUG[c]&&window.DEBUG[c]["setter"]===false){r.set=function(o){e=o}}Object.defineProperty(o,s,r)})(this)}}};o.prototype=r.prototype;for(var n in r){if(r.hasOwnProperty(n)){o[n]=r[n]}}return o}var currentConsoleDebugGroup=0;var intendedConsoleDebugGroup=0;function consoleDebug(o,n){while(intendedConsoleDebugGroup>currentConsoleDebugGroup&&intendedConsoleDebugGroup+(n||0)>currentConsoleDebugGroup){(console.groupCollapsed||console.group||function(){})();currentConsoleDebugGroup++}while(currentConsoleDebugGroup>intendedConsoleDebugGroup+(n||0)||currentConsoleDebugGroup>intendedConsoleDebugGroup){(console.groupEnd||function(){})();currentConsoleDebugGroup--}(console.debug||console.log||function(){})("["+Date.now()%1e4+"ms] "+o);intendedConsoleDebugGroup+=n||0}if(window.DEBUG){var TestClass=function(o){var n=this;this.prop=o||"b";this.functionA=function(o){return"a"};function e(){return n.prop}this.functionC=function(o){return"c"}};TestClass.prototype={functionB:function(){return this.prop}};var x=new TestClass("foo");var p=x.prop;var a=x.functionA("fa");var b=x.functionB("fb");var c=x.functionC("fc");x.prop="bar";TestClass=wrapWithDebug(TestClass);var X=new TestClass("foo");var P=X.prop;var A=X.functionA("fa");var B=X.functionB("fb");var C=X.functionC("fc");X.prop="bar";p==P||console.error("test failed");a==A||console.error("test failed");b==B||console.error("test failed");c==C||console.error("test failed");x.prop==X.prop||console.error("test failed")}